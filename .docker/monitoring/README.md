# 로컬용 모니터링 도커 컴포즈
> 로컬 서버에서 모니터 사용을 위한 설정파일입니다.  
> 그라파나 + 프로메테우스로 구성되어 있으며, 아래 과정을 통해 실행할 수 있습니다.  
> `프로메테우스, 그라파나 초기 설정을 유지하기 위해 각 설정 파일들을 볼륨에 마운트하여 관리합니다.`  
> 접속정보는 아래와 같습니다.  
> - 프로메테우스: http://localhost:9090  
> - 그라파나: http://localhost:3000

## 도커 컴포즈 설치 및 실행
### 1. 도커 컴포즈 설치
MacOS 기준 homebrew 설치 후 아래 커멘드로 도커 컴포즈를 설치합니다.
```shell
brew install docker-compose
```

### 2. 도커 컴포즈 실행
실행할 도커 컴포즈 yml 경로로 이동 후 아래 커멘드로 실행합니다.
* foreground
  ```shell
  docker-compose up
  ```
* background
  ```shell
  docker-compose up -d
  ```

### 3. 도커 컴포즈 중지
도커 컴포즈 실행 중지는 아래 커멘드/단축키로 중지할 수 있습니다.
`컨테이너에 저장된 데이터(DB 데이터) 는 유지됩니다.`
* 커멘드(background 실행 중인 경우)
  ```shell
  docker-compose stop
  ```
* 단축키(foreground 실행 중인 경우)
  ```
  Ctrl + C
  ```

### 4. 도커 컴포즈 초기화
최초 실행 후 컴포즈 파일 일부가 변경되어도 캐싱문제로 변경되지 않은 컨테이너가 실행되는 경우가 있습니다.  
이 때, 도커 컴포즈 컨테이너를 삭제하여 초기화할 수 있습니다.

**컨테이너가 삭제되어도 프로메테우스, 그라파나 데이터는 마운트된 위치에 계속 남아있음에 주의합니다.**
```shell
docker-compose down
```